<html>
  <head>
    <title>partyroom</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://rawgit.com/Ctrl-Alt-Zen/aframe-mobile-controls/master/components/twoway-motion/twoway-motion.js"></script>
    <script src="https://gftruj.github.io/webzamples/aframe/controls/oculus-thumbstick-controls.js"></script>
    <script src="https://cmhkjuwan.github.io/SmartProject-VR/js/userAgent.js"></script>
    <script src="https://mixedreality.mozilla.org/ammo.js/builds/ammo.wasm.js"></script>
    <script src="http://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v6.1.1/dist/aframe-extras.min.js" ></script>
    <script>
      AFRAME.registerComponent('explode', {
          init: function() {
              var el = this.el;
              el.addEventListener("collidestart", function () {
                  console.log('collision detected');
                  // el.parentElement.removeChild(el);
                  el.setAttribute('position', this.el.position);
              });
          }
      });
    </script>
  </head>
  <body>
    <a-scene renderer="colorManagement: true;" cursor="rayOrigin: mouse" physics=" driver: ammo; debug: true">

      <a-assets>
        <a-asset-item id="partyroom" src="https://cmhkjuwan.github.io/SmartProject-VR/gltf/birthday_party/scene.gltf"></a-asset-item>
      </a-assets>

      <a-assets>
        <a-asset-item id="lucy" src="https://cmhkjuwan.github.io/SmartProject-VR/gltf/lucy_2/untitled.gltf"></a-asset-item>
      </a-assets>
      
      <a-assets>
        <a-asset-item id="cake" src="https://cmhkjuwan.github.io/SmartProject-VR/gltf/cake/scene.gltf"></a-asset-item>
      </a-assets>

      <a-plane explode width="2.5" height="1.5" position="2.8 1 -2.03" rotation="180 0 0" color="#FFFFFF" ammo-body="type:   kinematic; 
      emitCollisionEvents: true;" ammo-shape="type: sphere; fit: manual; sphereRadius:0.5"></a-plane>
      <a-entity explode gltf-model="#partyroom" position="-1.8 0 -6" scale="1 1 1" rotation="0 -90 0" ammo-body="type:   kinematic; 
      emitCollisionEvents: true;" ammo-shape="type: sphere; fit: manual; sphereRadius:0.5"></a-entity>
      <a-entity explode gltf-model="#cake" position="2.85 1 -3.2" scale="0.4 0.43 0.4" rotation="0 90 0" ammo-body="type:   kinematic; 
      emitCollisionEvents: true;" ammo-shape="type: sphere; fit: manual; sphereRadius:0.5"></a-entity>
      <a-entity explode gltf-model="#lucy" position="2.85 0 -5" scale="0.1 0.1 0.1" rotation="0 0 0" ammo-body="type:   kinematic; 
      emitCollisionEvents: true;" ammo-shape="type: sphere; fit: manual; sphereRadius:0.5"></a-entity>
    
      <a-entity id="rig">
        <a-camera twoway-motion="speed: 20" explode ammo-body="type:   kinematic; 
        emitCollisionEvents: true;" ammo-shape="type: sphere; fit: manual; sphereRadius:0.5">
          <a-entity cursor="fuse: true; fuseTimeout: 1000"
                  position="0 0 -1"
                  geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                  material="color: white; shader: flat"
                  scale="0.5 0.5 0.5"
                  raycaster="far: 50; interval: 1000; objects: .clickable; showLine: true">
          <a-entity oculus-touch-controls="hand: left" ></a-entity>
          <a-entity oculus-touch-controls="hand: right" oculus-thumbstick-controls></a-entity>
        </a-camera>
      </a-entity>
    </a-scene>
  </body>
  <script type="text/javascript">

  </script>
</html>